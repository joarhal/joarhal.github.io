const init=async()=>{const e=window.Telegram?.WebApp,n="https://0uitsxjg97.whs.lol/";if(console.log("WebApp",e),e?.ready(),e&&e.themeParams){const n=e.themeParams;n?.bg_color&&(document.body.style.background=n.bg_color)}let a=await fetch(n);a.ok&&((await a.json()).ok||failApp("Something went wrong, please try again later.\n Error: 6548147"));a=await fetch(n+"auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:e.initData||"null"})});const t=await a.json(),{verified:o,session_token:i}=t;if(o){e.ready();const a=document.createElement("canvas");a.id="canvas",document.body.appendChild(a),window.engine=new Engine(window.engine_config),window.engine.startGame({onProgress:(e,n)=>{console.log("Loaded "+e+" of "+n+" bytes")}}),window.w3g_app={session_token:i,server_url:n}}else failApp("Something went wrong, please try again later.\n Error: 6548148")},failApp=(e,n)=>{window?.Telegram?.WebApp?.init_data?(WebApp.showAlert(e,n.message),WebApp.close()):alert(e+"\n"+n.message)};(async()=>{try{await init()}catch(e){failApp("Something went wrong, please try again later.\n Error: 6545192",e)}})();
